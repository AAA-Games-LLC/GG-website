---
import Layout from "../layouts/Layout.astro";
import ThemeToggle from "../components/ThemeToggle.astro";
import ButtonBox from "../components/ButtonBox.astro";
import HeroSection from "../components/HeroSection.astro";
import Footer from "../components/Footer.astro";

// Hero section content
const heroSections = [
    {
        title: "Co-op Procedural Dungeon Crawling",
        description:
            "Parties up to 4 members can hit procedural themed dungeons across the land.",
        imagePosition: "right",
    },
    {
        title: "Thousands of custom magic abilities",
        description:
            "Elemental Glyph system allows for mixing and matching to create thousands of custom spells and magical abilities.",
        imagePosition: "left",
    },
    {
        title: "Terribly half baked story",
        description: "All the effort went into the procedural dungeons!",
        imagePosition: "right",
    },
];
---

<Layout>
    <main>
        <ThemeToggle />

        <header>
            <h1>
                <pre class="title-pre">
Glyph & Glory
        </pre>
            </h1>
            <div class="header-action">
                <ButtonBox
                    text="Wishlist on Steam ->"
                    href="#download"
                    class="download-button"
                />
            </div>
        </header>

        {
            heroSections.map((section, index) => (
                <HeroSection
                    title={section.title}
                    description={section.description}
                    imagePosition={section.imagePosition}
                    index={index + 1}
                />
            ))
        }

        <Footer />
    </main>
</Layout>

<script>
    // Calculate gutter width based on screen size
    const calculateGutter = () => {
        const screenWidth = window.innerWidth;
        const gutterWidth = Math.max(
            0,
            Math.min(
                Math.max(0, 25 + (screenWidth * 0.25 - 250)),
                screenWidth / 3,
            ),
        );
        document.documentElement.style.setProperty(
            "--gutter",
            `${gutterWidth}px`,
        );
    };

    // Calculate on load and resize
    window.addEventListener("load", calculateGutter);
    window.addEventListener("resize", calculateGutter);
</script>

<style>
    main {
        width: 100%;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    header {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 5rem calc(var(--gutter) + 1rem) 3rem;
        text-align: center;
    }

    h1 {
        margin: 0;
        font-size: 2.5rem;
    }

    .title-pre {
        font-size: 1em;
        margin: 0;
        padding: 0;
        line-height: 1.3;
        white-space: pre;
        user-select: none;
    }

    .header-action {
        margin-top: 2rem;
    }

    .download-button {
        font-size: 1.25rem;
    }

    @media (max-width: 768px) {
        .title-pre {
            font-size: 0.7em;
        }
    }

    @media (max-width: 480px) {
        .title-pre {
            font-size: 0.5em;
        }
    }
</style>
